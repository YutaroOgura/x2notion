---
description: 
globs: 
alwaysApply: true
---
---
description: Apply this rule to the entire repository
globs: 
alwaysApply: true
---
ã¾ãšã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ãŸã‚‰ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ç™ºè¨€ã™ã‚‹ã“ã¨

# ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»CI/CD ã‚¬ã‚¤ãƒ‰ï¼ˆECS + GitHub Actionsï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ AWS ECSï¼ˆFargateï¼‰ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã€GitHub Actions ã«ã‚ˆã‚‹ CI/CD ã‚’æ§‹æˆã—ã¦ã„ã¾ã™ã€‚

---

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤å…ˆæ§‹æˆ

- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼šECS Fargateï¼ˆLaravel + PHP-FPM + Supervisorï¼‰
- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼šECS Fargateï¼ˆNginx + ãƒ“ãƒ«ãƒ‰æ¸ˆã¿Vueï¼‰
- ãã®ä»–ï¼šALB, CloudWatch Logs, Secrets Manager

---

## ğŸ” CI/CD ãƒ•ãƒ­ãƒ¼ï¼ˆGitHub Actionsï¼‰

### ãƒ•ãƒ­ãƒ¼æ¦‚è¦

1. push or PR â†’ GitHub Actions ç™ºç«
2. Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ & ECR ã«ãƒ—ãƒƒã‚·ãƒ¥
3. ECS ã‚¿ã‚¹ã‚¯å®šç¾©ã‚’æ›´æ–°ã—ã€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãƒ‡ãƒ—ãƒ­ã‚¤

---

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆä¾‹ï¼‰

- `.github/workflows/backend.yml`
- `.github/workflows/frontend.yml`

---

### backend.yml ã®ä¾‹

```yaml
name: Deploy Laravel

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build & Push Docker image
        ...
      - name: Update ECS service
        ...
```

---

## ğŸ§  è£œè¶³

- Laravel ã®ç’°å¢ƒå¤‰æ•°ã¯ AWS Secrets Manager ã§ç®¡ç†
- ãƒ•ãƒ­ãƒ³ãƒˆã¯ S3 + CloudFront ã¾ãŸã¯ ECS é…ä¿¡ã®ã„ãšã‚Œã‹é¸æŠå¯èƒ½
- Blue/Green ãƒ‡ãƒ—ãƒ­ã‚¤ã¯å¿…è¦ã«å¿œã˜ã¦ CodeDeploy ã‚’ä½µç”¨

# 機能一覧

## 1. X投稿取得・保存機能

### 1.1 定期実行機能
- 15分ごとに自動実行（Cronトリガー）
- 前回取得以降の新規投稿のみを取得

### 1.2 X API連携機能
- 指定ユーザーのタイムライン取得
- 投稿内容、メディア、メタデータの取得
- Bearer Token認証

### 1.3 データ前処理機能
- 重複投稿の除外（静的データによる管理）
- メディア情報の抽出・整形
- ハッシュタグ・メンション抽出

### 1.4 Notion DB保存機能
- 投稿内容をNotion DBに構造化して保存
- メディア情報、メタデータの保存
- 投稿タイプの分類（通常/リプライ/リツイート/引用）

### 1.5 統計・ログ機能
- 処理件数の記録
- 日次統計の自動集計
- エラー発生時の通知

## 2. AI分析・チャット応答機能

### 2.1 メッセージ受信機能
- Slackイベント受信（Webhook）
- LINEメッセージ受信（Webhook）
- メッセージ内容の解析・検証

### 2.2 キーワード抽出・検索機能
- メッセージからのキーワード抽出
- 質問タイプの判定（一般/要約/検索/分析/最新）
- Notion DB内の関連投稿検索

### 2.3 テキスト前処理機能
- 長文分割
- URL・不要情報の除去
- テキスト正規化

### 2.4 AI応答生成機能
- OpenAI GPTモデルによる応答生成
- コンテキスト情報の提供
- 応答内容の整形

### 2.5 応答送信機能
- Slackスレッド返信
- LINE返信メッセージ送信
- 応答メタデータの付与

### 2.6 履歴保存機能
- ユーザー質問内容の保存
- AI応答内容の保存
- トークン使用量・応答時間の記録

## 3. エラー処理・監視機能

### 3.1 エラー検知機能
- ワークフロー実行エラーの捕捉
- API連携エラーの検知
- タイムアウト検知

### 3.2 通知機能
- Slackへのエラー通知
- エラー詳細情報の提供
- 発生時刻・ノード情報の記録

### 3.3 ログ記録機能
- エラーログの記録
- 実行統計の記録
- 処理結果の記録

## 4. 管理UI/API機能

### 4.1 AI応答履歴管理機能
- 応答履歴一覧表示
- 検索・フィルタリング
- 詳細表示

### 4.2 統計情報表示機能
- 総応答数表示
- 日次応答数表示
- プラットフォーム別内訳表示
- 平均トークン使用量表示

### 4.3 Webhook受信機能
- AI応答ログ受信
- Notion投稿通知受信
- エラー通知受信
